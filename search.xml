<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Java - 多线程之线程间的通信方式</title>
      <link href="/post/3c42cd7b.html"/>
      <url>/post/3c42cd7b.html</url>
      
        <content type="html"><![CDATA[<h3 id="1-同步"><a href="#1-同步" class="headerlink" title="1.同步"></a>1.同步</h3><p>多个线程通过synchronized关键字这种方式来实现线程间的通信</p><p>参考案例：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyObject</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">synchronized</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//do something....</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">synchronized</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//do some other thing</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadA</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">MyObject</span> object<span class="token punctuation">;</span><span class="token comment">//省略构造方法</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        object<span class="token punctuation">.</span><span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadB</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">MyObject</span> object<span class="token punctuation">;</span><span class="token comment">//省略构造方法</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        object<span class="token punctuation">.</span><span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Run</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">MyObject</span> object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//线程A与线程B 持有的是同一个对象:object</span>        <span class="token class-name">ThreadA</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadA</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ThreadB</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadB</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        b<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>由于线程A和线程B持有同一个MyObject类的对象object，尽管这两个线程需要调用不同的方法，但是它们是同步执行的，比如：<strong>线程B需要等待线程A执行完了methodA()方法之后，它才能执行methodB()方法。这样，线程A和线程B就实现了 通信。</strong></p><p><strong>这种方式，本质上就是“共享内存”式的通信。多个线程需要访问同一个共享变量，谁拿到了锁（获得了访问权限），谁就可以执行。</strong></p><h3 id="2-while轮询的方式"><a href="#2-while轮询的方式" class="headerlink" title="2.while轮询的方式"></a>2.while轮询的方式</h3><p>参考案例：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyList</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"elements"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">import</span> <span class="token namespace">mylist<span class="token punctuation">.</span></span><span class="token class-name">MyList</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadA</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">MyList</span> list<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ThreadA</span><span class="token punctuation">(</span><span class="token class-name">MyList</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"添加了"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"个元素"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">import</span> <span class="token namespace">mylist<span class="token punctuation">.</span></span><span class="token class-name">MyList</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadB</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">MyList</span> list<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ThreadB</span><span class="token punctuation">(</span><span class="token class-name">MyList</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"==5, 线程b准备退出了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">import</span> <span class="token namespace">mylist<span class="token punctuation">.</span></span><span class="token class-name">MyList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">extthread<span class="token punctuation">.</span></span><span class="token class-name">ThreadA</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">extthread<span class="token punctuation">.</span></span><span class="token class-name">ThreadB</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">MyList</span> service <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ThreadA</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadA</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ThreadB</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadB</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span><span class="token punctuation">;</span>        b<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        b<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这种方式下，线程A不断地改变条件，线程ThreadB不停地通过while语句检测这个条件(list.size()==5)是否成立 ，从而实现了线程间的通信。但是<strong>这种方式会浪费CPU资源</strong>。之所以说它浪费资源，是因为JVM调度器将CPU交给线程B执行时，它没做啥“有用”的工作，只是在不断地测试 某个条件是否成立。<em>就类似于现实生活中，某个人一直看着手机屏幕是否有电话来了，而不是： 在干别的事情，当有电话来时，响铃通知TA电话来了。</em>关于线程的轮询的影响，<a href="http://www.cnblogs.com/hapjin/p/5467984.html">可参考：</a><a href="http://www.cnblogs.com/hapjin/p/5467984.html">JAVA多线程之当一个线程在执行死循环时会影响另外一个线程吗？</a></p><p>这种方式还存在另外一个问题：</p><p>轮询的条件的可见性问题，关于内存可见性问题，可参考：<a href="http://www.cnblogs.com/hapjin/p/5492880.html">JAVA多线程之volatile 与 synchronized 的比较</a>中的第一点“<strong>一，volatile关键字的可见性</strong>”</p><p>线程都是先把变量读取到本地线程栈空间，然后再去再去修改的本地变量。因此，如果线程B每次都在取本地的 条件变量，那么尽管另外一个线程已经改变了轮询的条件，它也察觉不到，这样也会造成死循环。</p><h3 id="3-wait-notify机制"><a href="#3-wait-notify机制" class="headerlink" title="3.wait/notify机制"></a>3.wait/notify机制</h3><p>参考案例：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyList</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"anyString"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadA</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> lock<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ThreadA</span><span class="token punctuation">(</span><span class="token class-name">Object</span> lock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>lock <span class="token operator">=</span> lock<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">MyList</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"wait begin "</span>                            <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    lock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"wait end  "</span>                            <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadB</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> lock<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ThreadB</span><span class="token punctuation">(</span><span class="token class-name">Object</span> lock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>lock <span class="token operator">=</span> lock<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">MyList</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">MyList</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        lock<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"已经发出了通知"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"添加了"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"个元素!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Run</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Object</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">ThreadA</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadA</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">ThreadB</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadB</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>线程A要等待某个条件满足时(list.size()==5)，才执行操作。线程B则向list中添加元素，改变list 的size。</p><p>A,B之间如何通信的呢？也就是说，线程A如何知道 list.size() 已经为5了呢？</p><p>这里用到了Object类的 wait() 和 notify() 方法。</p><p>当条件未满足时(list.size() !=5)，线程A调用wait() 放弃CPU，并进入阻塞状态。—不像②while轮询那样占用CPU</p><p>当条件满足时，线程B调用 notify()通知 线程A，所谓通知线程A，就是唤醒线程A，并让它进入可运行状态。</p><p>这种方式的一个好处就是CPU的利用率提高了。</p><p>但是也有一些缺点：比如，线程B先执行，一下子添加了5个元素并调用了notify()发送了通知，而此时线程A还执行；当线程A执行并调用wait()时，那它永远就不可能被唤醒了。因为，线程B已经发了通知了，以后不再发通知了。这说明：<strong>通知过早，会打乱程序的执行逻辑。</strong></p><h3 id="4-管道通信"><a href="#4-管道通信" class="headerlink" title="4.管道通信"></a>4.管道通信</h3><p>在java的类库中有2个管道类：PipedWriter(允许任务向管道写)，和PipedReader(允许不同任务从同一管道中读取)。管道也可以理解为一个缓冲区，将要读写的内容存入到管道，输入输出都要从这个管道去操作，管道提供了一个封装好的解决方案。</p><p>参考案例</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PipedReader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PipedWriter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span><span class="token comment">/** * 任务间使用管道进行输入输出 */</span><span class="token keyword">class</span> <span class="token class-name">Sender</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Random</span> random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">PipedWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">PipedWriter</span> <span class="token function">getPipedWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token keyword">return</span> out<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span> c<span class="token operator">&lt;</span><span class="token string">'Z'</span><span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//随机休眠500以内毫秒</span>                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e <span class="token operator">+</span> <span class="token string">" Sender write exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e <span class="token operator">+</span> <span class="token string">" Sender sleep interrupt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Receiver</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">PipedReader</span> in<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token class-name">Sender</span> sender<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">&#123;</span>        in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedReader</span><span class="token punctuation">(</span>sender<span class="token punctuation">.</span><span class="token function">getPipedWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Read: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e <span class="token operator">+</span> <span class="token string">" Receiver read exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PipedIO</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Sender</span> sender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span>sender<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ExecutorService</span> exec <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        exec<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sender<span class="token punctuation">)</span><span class="token punctuation">;</span>        exec<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//休眠4秒钟后中断</span>        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        exec<span class="token punctuation">.</span><span class="token function">shutdownNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Sender和Receiver分别代表了2个需要互相通信的任务（相当于生产者和消费者的角色)，Sender 简历一个单独的PipedWriter对象，将信息写入到管道当中，而Receiver建立的PipedReader对象必须绑定到与Sender相关联的管道中，才能保证正确读取到数据。<br>详细内容请参考《Thinking in Java》,pageId:717</p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Thread </tag>
            
            <tag> 多线程 </tag>
            
            <tag> 通信 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java - 为什么等待和通知是在Object类而不是Thread中声明的？</title>
      <link href="/post/9a8914a9.html"/>
      <url>/post/9a8914a9.html</url>
      
        <content type="html"><![CDATA[<p>１.wait和notify不仅仅是普通方法或同步工具，更重要的是它们是Java中两个线程之间的通信机制 。对语言设计者而言，如果不能通过Java关键字（例如synchronized）实现此通信机制，同时又要确保这个机制对每个对象可用，那么Object类则是正确的声明位置。记住同步和等待、通知是两个不同的领域，不要把它们看成是相同的或相关的。同步是提供互斥并确保Java类的线程安全，而wait和notify是两个线程之间的通信机制。</p><p>２.每个对象都可上锁，这是在Object类而不是Thread类中声明wait和notify的另一个原因。</p><p>３.在Java中为了进入代码的临界区，线程需要锁定并等待锁定，他们不知道哪些线程持有锁，而只是知道锁被某个线程持有，并且他们应该等待取得锁，而不是去了解哪个线程在同步块内，并请求它们释放锁定。</p><p>４.Java是基于监视器的思想，在Java中，所有对象都有一个监视器。</p><p>线程在监视器上等待，为执行等待，我们需要2个参数：</p><p>​    （1）一个线程<br>​    （2）一个监视器（任何对象）<br>在Java设计中，线程不能被指定，它总是运行当前代码的线程。但是，我们可以指定监视器（这是我们称之为等待的对象）。这是一个很好的设计，因为如果我们可以让任何其他线程在所需的监视器上等待，这将导致“入侵”，导致在设计并发程序时会遇到困难。请记住，在Java中，所有在另一个线程的执行中侵入的操作都被弃用了（例如stop方法）。</p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java中判断一个String字符串中包含某个字段</title>
      <link href="/post/19b7bc41.html"/>
      <url>/post/19b7bc41.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-判断String字符串中包含某个字段"><a href="#1-判断String字符串中包含某个字段" class="headerlink" title="1.判断String字符串中包含某个字段"></a>1.判断String字符串中包含某个字段</h2><h3 id="1-indexOf-方法"><a href="#1-indexOf-方法" class="headerlink" title="1.indexOf()方法"></a>1.indexOf()方法</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"~~~MICO~~~"</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> flag <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"MICO"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：3</span>    <span class="token keyword">int</span> flag1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"FENG"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flag1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：-1</span>    <span class="token comment">//如果包含，输出这个字符串在数组中的索引（如果有重复的，则输出第一次出现的索引位置）；否则输出-1。</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-contains-方法"><a href="#2-contains-方法" class="headerlink" title="2.contains()方法"></a>2.contains()方法</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"~~~MICO~~~"</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> flag <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"MICO"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：true</span>    <span class="token keyword">boolean</span> flag1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"FENG"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flag1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：false</span>    <span class="token comment">//如果包含，输出true；否则输出false。</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//contains()方法的底层实现还是indexOf()方法！</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-判断String数组中是否包含某个字符串"><a href="#2-判断String数组中是否包含某个字符串" class="headerlink" title="2.判断String数组中是否包含某个字符串"></a>2.判断String数组中是否包含某个字符串</h2><h3 id="1-indexOf-方法-1"><a href="#1-indexOf-方法-1" class="headerlink" title="1.indexOf()方法"></a>1.indexOf()方法</h3> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"aa,bb,cc,dd"</span><span class="token punctuation">;</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strs <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> flag <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"cc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//如果包含，输出这个字符串在数组中的索引（比如此例输出2）；否则输出-1。</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-contains-方法-1"><a href="#2-contains-方法-1" class="headerlink" title="2.contains()方法"></a>2.contains()方法</h3> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"aa,bb,cc,dd"</span><span class="token punctuation">;</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strs <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将String数组转化为list集合</span>    <span class="token keyword">boolean</span> flag <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"bh"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//如果包含，输出true；否则输出false。</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> String </tag>
            
            <tag> 字符串 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis简介与原理</title>
      <link href="/post/b18bb060.html"/>
      <url>/post/b18bb060.html</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="什么是-MyBatis"><a href="#什么是-MyBatis" class="headerlink" title="什么是 MyBatis"></a>什么是 MyBatis</h3><p>MyBatis是一款优秀的持久层框架，它支持自定义SQL、存储过程以及高级映射。MyBatis免除了几乎所有JDBC代码以及设置结果集的工作。MyBatis可以通过简单的XML或者注解来配置和映射原始类型、接口和java POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。</p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis常用命令</title>
      <link href="/post/ed3b1c3a.html"/>
      <url>/post/ed3b1c3a.html</url>
      
        <content type="html"><![CDATA[<h2 id="Redis-命令"><a href="#Redis-命令" class="headerlink" title="Redis 命令"></a>Redis 命令</h2><h3 id="一-连接"><a href="#一-连接" class="headerlink" title="一.连接"></a>一.连接</h3><h4 id="1-连接本地服务"><a href="#1-连接本地服务" class="headerlink" title="1.连接本地服务"></a>1.连接本地服务</h4><p>连接到本地的 redis 服务并执行 <strong>PING</strong> 命令，该命令用于检测 redis 服务是否启动。</p><pre class="line-numbers language-none"><code class="language-none">[root@VM-4-9-centos ~]# docker exec -it redis-test &#x2F;bin&#x2F;bashroot@dffc411e699e:&#x2F;data# redis-cli127.0.0.1:6379&gt; pingPONG127.0.0.1:6379&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-连接远程服务"><a href="#2-连接远程服务" class="headerlink" title="2.连接远程服务"></a>2.连接远程服务</h4><p>如果需要在远程 redis 服务上执行命令，同样我们使用的也是 <strong>redis-cli</strong> 命令。</p><pre class="line-numbers language-none"><code class="language-none">redis-cli -h host -p port -a password<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">[root@VM-4-9-centos ~]# docker exec -it redis-test &#x2F;bin&#x2F;bashroot@dffc411e699e:&#x2F;data# redis-cli -h 127.0.0.1 -p 6379127.0.0.1:6379&gt; pingPONG127.0.0.1:6379&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id><a href="#" class="headerlink" title></a><!--二.键(key) --></h3><p>未完待续…</p>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker安装Redis</title>
      <link href="/post/24c94d92.html"/>
      <url>/post/24c94d92.html</url>
      
        <content type="html"><![CDATA[<h2 id="Docker-安装-Redis"><a href="#Docker-安装-Redis" class="headerlink" title="Docker 安装 Redis"></a>Docker 安装 Redis</h2><h3 id="查看可用的-Redis-版本"><a href="#查看可用的-Redis-版本" class="headerlink" title="查看可用的 Redis 版本"></a>查看可用的 Redis 版本</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@VM-4-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker search redis</span>INDEX       NAME                                       DESCRIPTION                                     STARS     OFFICIAL   AUTOMATEDdocker.io   docker.io/redis                            Redis is an <span class="token function">open</span> <span class="token builtin class-name">source</span> key-value store th<span class="token punctuation">..</span>.   <span class="token number">9554</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/bitnami/redis                    Bitnami Redis Docker Image                      <span class="token number">185</span>                  <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/sameersbn/redis                                                                  <span class="token number">83</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/grokzen/redis-cluster            Redis cluster <span class="token number">3.0</span>, <span class="token number">3.2</span>, <span class="token number">4.0</span>, <span class="token number">5.0</span>, <span class="token number">6.0</span>, <span class="token number">6.2</span>      <span class="token number">78</span>docker.io   docker.io/rediscommander/redis-commander   Alpine image <span class="token keyword">for</span> redis-commander - Redis m<span class="token punctuation">..</span>.   <span class="token number">60</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/redislabs/redisearch             Redis With the RedisSearch module pre-load<span class="token punctuation">..</span>.   <span class="token number">34</span>docker.io   docker.io/redislabs/redis                  Clustered in-memory database engine compat<span class="token punctuation">..</span>.   <span class="token number">30</span>docker.io   docker.io/redislabs/redisinsight           RedisInsight - The GUI <span class="token keyword">for</span> Redis                <span class="token number">30</span>docker.io   docker.io/oliver006/redis_exporter          Prometheus Exporter <span class="token keyword">for</span> Redis Metrics. Su<span class="token punctuation">..</span>.   <span class="token number">26</span>docker.io   docker.io/arm32v7/redis                    Redis is an <span class="token function">open</span> <span class="token builtin class-name">source</span> key-value store th<span class="token punctuation">..</span>.   <span class="token number">24</span>docker.io   docker.io/bitnami/redis-sentinel           Bitnami Docker Image <span class="token keyword">for</span> Redis Sentinel         <span class="token number">23</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/redislabs/rejson                 RedisJSON - Enhanced JSON data <span class="token builtin class-name">type</span> proces<span class="token punctuation">..</span>.   <span class="token number">23</span>docker.io   docker.io/redislabs/redisgraph             A graph database module <span class="token keyword">for</span> Redis               <span class="token number">15</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/redislabs/redismod               An automated build of redismod - latest Re<span class="token punctuation">..</span>.   <span class="token number">13</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/arm64v8/redis                    Redis is an <span class="token function">open</span> <span class="token builtin class-name">source</span> key-value store th<span class="token punctuation">..</span>.   <span class="token number">12</span>docker.io   docker.io/webhippie/redis                  Docker images <span class="token keyword">for</span> Redis                         <span class="token number">11</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/insready/redis-stat              Docker image <span class="token keyword">for</span> the real-time Redis monit<span class="token punctuation">..</span>.   <span class="token number">10</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/s7anley/redis-sentinel-docker    Redis Sentinel                                  <span class="token number">10</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/goodsmileduck/redis-cli          redis-cli on alpine                             <span class="token number">9</span>                    <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/circleci/redis                   CircleCI images <span class="token keyword">for</span> Redis                       <span class="token number">7</span>                    <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/centos/redis-32-centos7          Redis in-memory data structure store, used<span class="token punctuation">..</span>.   <span class="token number">5</span>docker.io   docker.io/clearlinux/redis                 Redis key-value data structure server with<span class="token punctuation">..</span>.   <span class="token number">3</span>docker.io   docker.io/tiredofit/redis                  Redis Server w/ Zabbix monitoring and S6 O<span class="token punctuation">..</span>.   <span class="token number">1</span>                    <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/wodby/redis                      Redis container image with orchestration        <span class="token number">1</span>                    <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>docker.io   docker.io/xetamus/redis-resource           forked redis-resource                           <span class="token number">0</span>                    <span class="token punctuation">[</span>OK<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><h3 id="获取最新版的-Redis-镜像"><a href="#获取最新版的-Redis-镜像" class="headerlink" title="获取最新版的 Redis 镜像"></a>获取最新版的 Redis 镜像</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@VM-4-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker pull redis:latest</span>Trying to pull repository docker.io/library/redis <span class="token punctuation">..</span>.latest: Pulling from docker.io/library/redis69692152171a: Already existsa4a46f2fd7e0: Pull completebcdf6fddc3bd: Pull complete2902e41faefa: Pull completedf3e1d63cdb1: Pull completefa57f005a60d: Pull completeDigest: sha256:7e2c6181ad5c425443b56c7c73a9cd6df24a122345847d1ea9bb86a5afc76325Status: Downloaded newer image <span class="token keyword">for</span> docker.io/redis:latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查看本地镜像"><a href="#查看本地镜像" class="headerlink" title="查看本地镜像"></a>查看本地镜像</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@VM-4-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker images |grep redis</span>docker.io/redis                     latest              fad0ee7e917a        <span class="token number">7</span> days ago          <span class="token number">105</span> MB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h3><p>使用以下命令来运行 redis 容器：</p><pre class="line-numbers language-none"><code class="language-none">[root@VM-4-9-centos ~]# docker run -itd --name redis-test -p 6379:6379 redisdffc411e699ecb26e19376c68c3d37487bf49121d344b66f146b94e11c713a38<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>参数说明：</p><ul><li><strong>-p 6379:6379</strong>：映射容器服务的 6379 端口到宿主机的 6379 端口。外部可以直接通过宿主机ip:6379 访问到 Redis 的服务。</li></ul><h3 id="安装成功"><a href="#安装成功" class="headerlink" title="安装成功"></a>安装成功</h3><p>通过 <strong>docker ps</strong> 命令查看容器的运行信息：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@VM-4-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker ps |grep redis</span>dffc411e699e        redis                     <span class="token string">"docker-entrypoint..."</span>   <span class="token number">4</span> minutes ago       Up <span class="token number">4</span> minutes        <span class="token number">0.0</span>.0.0:6379-<span class="token operator">></span><span class="token number">6379</span>/tcp                         redis-test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>通过 redis-cli 连接测试使用 redis 服务</p><pre class="line-numbers language-none"><code class="language-none">[root@VM-4-9-centos ~]# docker exec -it redis-test &#x2F;bin&#x2F;bashroot@dffc411e699e:&#x2F;data# redis-cli127.0.0.1:6379&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> 安装 </tag>
            
            <tag> 单机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux源码安装Redis</title>
      <link href="/post/703640c2.html"/>
      <url>/post/703640c2.html</url>
      
        <content type="html"><![CDATA[<h2 id="Linux源码安装Redis"><a href="#Linux源码安装Redis" class="headerlink" title="Linux源码安装Redis"></a>Linux源码安装Redis</h2><h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><p><a href="http://redis.io/download">http://redis.io/download</a></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>下载、解压和编译Redis：</p><pre class="line-numbers language-none"><code class="language-none">$ wget https:&#x2F;&#x2F;download.redis.io&#x2F;releases&#x2F;redis-6.2.4.tar.gz$ tar xzf redis-6.2.4.tar.gz$ cd redis-6.2.4$ make<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>现在编译的二进制文件在<code>src</code> 目录中可用 。运行Redis：</p><pre class="line-numbers language-none"><code class="language-none">$ src&#x2F;redis-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>您可以使用内置客户端与 Redis 交互：</p><pre class="line-numbers language-none"><code class="language-none">$ src&#x2F;redis-cliredis&gt; set foo barOKredis&gt; get foo&quot;bar&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安装 </tag>
            
            <tag> 单机 </tag>
            
            <tag> Liunx </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决Hexo图片无法显示问题</title>
      <link href="/post/57d980c.html"/>
      <url>/post/57d980c.html</url>
      
        <content type="html"><![CDATA[<p>版本hexo: 5.4.0</p><p>解决方案如下：</p><h3 id="next主题"><a href="#next主题" class="headerlink" title="next主题"></a>next主题</h3><p>　　1. 在根目录下配置文件<code>_config.yml</code> 中有 <code>post_asset_folder:false改为true</code>。这样在建立文件时，<code>Hexo</code>会自动建立一个与文章同名的文件夹，这样就可以把与该文章相关的所有资源（图片）都放到那个文件夹里方便后面引用。如这里我放了一张test.jpg的图片。</p><p>　　2. git bash安装插件：npm install <a href="https://github.com/7ym0n/hexo-asset-image">https://github.com/7ym0n/hexo-asset-image</a> –save（这是个修改过的插件，经测试无问题），使用这个插件来引入图片，而不是网上那些方法里说的用传统md语法相对路径的方法。</p><p>　　3. 插入图片时用这种方式：****</p><p>　　　　　<strong>其中test.jpg就是你要引用的图片，我这里就是test.jpg，后面的This is an test image是图片描述，可以自己修改。</strong></p><p>　　4. 这样就能成功显示了，测试下吧：hexo cl &amp;&amp; hexo g &amp;&amp; hexo d</p><h3 id="Fluid主题"><a href="#Fluid主题" class="headerlink" title="Fluid主题"></a>Fluid主题</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">1</span>.png<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 图片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows安装Redis</title>
      <link href="/post/a01b8af8.html"/>
      <url>/post/a01b8af8.html</url>
      
        <content type="html"><![CDATA[<h2 id="Windows-下安装"><a href="#Windows-下安装" class="headerlink" title="Windows 下安装"></a>Windows 下安装</h2><h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><p><a href="https://github.com/tporadowski/redis/releases">https://github.com/tporadowski/redis/releases</a></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>Redis 支持 32 位和 64 位。这个需要根据你系统平台的实际情况选择，这里我们下载 <strong>Redis-x64-5.0.10.zip</strong>压缩包并解压。<br> <img src="/post/a01b8af8/1.png"></p><span id="more"></span><p>打开文件夹，内容如下：</p><p><img src="/post/a01b8af8/2.jpg"></p><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>在解压目录按住Shift再点击右键选择命令窗口，运行：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">redis-server.exe redis.windows.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/post/a01b8af8/3.jpg"></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>这时候另启一个命令窗口，原来的不要关闭，不然就无法访问服务端了。</p><p>切换到 redis 目录下运行:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">redis-cli.exe -h <span class="token number">127.0</span>.0.1 -p <span class="token number">6379</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>设置键值对:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">set</span> myKey abc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>取出键值对:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">get myKey<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/post/a01b8af8/4.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安装 </tag>
            
            <tag> 单机 </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo安装记录</title>
      <link href="/post/93c315da.html"/>
      <url>/post/93c315da.html</url>
      
        <content type="html"><![CDATA[<h2 id="插件记录"><a href="#插件记录" class="headerlink" title="插件记录"></a>插件记录</h2><h3 id="图片插件"><a href="#图片插件" class="headerlink" title="图片插件"></a>图片插件</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> hexo-asset-image --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在_config.yml配置文件中，修改为 post_asset_folder: true</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设计模式简介</title>
      <link href="/post/362df446.html"/>
      <url>/post/362df446.html</url>
      
        <content type="html"><![CDATA[<h2 id="设计模式简介"><a href="#设计模式简介" class="headerlink" title="设计模式简介"></a>设计模式简介</h2><p>设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。</p><p>设计模式是一套被反复使用的、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理地运用设计模式可以完美地解决很多问题，每种模式在现实中都有相应的原理来与之对应，每种模式都描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是设计模式能被广泛应用的原因。<span id="more"></span></p><h2 id="设计模式的类型"><a href="#设计模式的类型" class="headerlink" title="设计模式的类型"></a>设计模式的类型</h2><p>根据设计模式的参考书 <strong>Design Patterns - Elements of Reusable Object-Oriented Software（中文译名：设计模式 - 可复用的面向对象软件元素）</strong> 中所提到的，总共有 23 种设计模式。这些模式可以分为三大类：创建型模式（Creational Patterns）、结构型模式（Structural Patterns）、行为型模式（Behavioral Patterns）。当然，我们还会讨论另一类设计模式：J2EE 设计模式。</p><table><thead><tr><th align="left">序号</th><th align="left">模式 &amp; 描述</th><th align="left">包括</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>创建型模式</strong> 这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。</td><td align="left">工厂模式（Factory Pattern）抽象工厂模式（Abstract Factory Pattern）单例模式（Singleton Pattern）建造者模式（Builder Pattern）原型模式（Prototype Pattern）</td></tr><tr><td align="left">2</td><td align="left"><strong>结构型模式</strong> 这些设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式。</td><td align="left">适配器模式（Adapter Pattern）桥接模式（Bridge Pattern）过滤器模式（Filter、Criteria Pattern）组合模式（Composite Pattern）装饰器模式（Decorator Pattern）外观模式（Facade Pattern）享元模式（Flyweight Pattern）代理模式（Proxy Pattern）</td></tr><tr><td align="left">3</td><td align="left"><strong>行为型模式</strong> 这些设计模式特别关注对象之间的通信。</td><td align="left">责任链模式（Chain of Responsibility Pattern）命令模式（Command Pattern）解释器模式（Interpreter Pattern）迭代器模式（Iterator Pattern）中介者模式（Mediator Pattern）备忘录模式（Memento Pattern）观察者模式（Observer Pattern）状态模式（State Pattern）空对象模式（Null Object Pattern）策略模式（Strategy Pattern）模板模式（Template Pattern）访问者模式（Visitor Pattern）</td></tr><tr><td align="left">4</td><td align="left"><strong>J2EE 模式</strong> 这些设计模式特别关注表示层。这些模式是由 Sun Java Center 鉴定的。</td><td align="left">MVC 模式（MVC Pattern）业务代表模式（Business Delegate Pattern）组合实体模式（Composite Entity Pattern）数据访问对象模式（Data Access Object Pattern）前端控制器模式（Front Controller Pattern）拦截过滤器模式（Intercepting Filter Pattern）服务定位器模式（Service Locator Pattern）传输对象模式（Transfer Object Pattern）</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ifconfig命令安装</title>
      <link href="/post/f4d8dc94.html"/>
      <url>/post/f4d8dc94.html</url>
      
        <content type="html"><![CDATA[<h3 id="CentOS7安装"><a href="#CentOS7安装" class="headerlink" title="CentOS7安装"></a>CentOS7安装</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yum search net-toolsyum <span class="token function">install</span> net-tools.x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> net </tag>
            
            <tag> ping </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>鼠标箭头变为手型，移出后再变为原型</title>
      <link href="/post/4368037d.html"/>
      <url>/post/4368037d.html</url>
      
        <content type="html"><![CDATA[<p>html 中如何让鼠标箭头移到某个区域(div,input,a等标签)上就变为手型，移出后再变为原型</p><p>在区域的样式上添加：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">style="cursor:pointer;"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>样例：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">cursor</span><span class="token punctuation">:</span>pointer</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">cursor</span><span class="token punctuation">:</span>pointer</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js数组操作(创建、添加、替换、删除、清空等)</title>
      <link href="/post/cbf90742.html"/>
      <url>/post/cbf90742.html</url>
      
        <content type="html"><![CDATA[<h2 id="数组属性"><a href="#数组属性" class="headerlink" title="数组属性"></a>数组属性</h2><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><a href="http://www.w3school.com.cn/jsref/jsref_constructor_array.asp">constructor</a></td><td>返回对创建此对象的数组函数的引用。</td></tr><tr><td><a href="http://www.w3school.com.cn/jsref/jsref_length_array.asp">length</a></td><td>设置或返回数组中元素的数目。</td></tr><tr><td><a href="http://www.w3school.com.cn/jsref/jsref_prototype_array.asp">prototype</a></td><td>使您有能力向对象添加属性和方法。</td></tr></tbody></table><h2 id="一、创建数组并给数组元素赋值"><a href="#一、创建数组并给数组元素赋值" class="headerlink" title="一、创建数组并给数组元素赋值"></a><strong>一、创建数组并给数组元素赋值</strong></h2><p><strong>1.常规方式</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> myCars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>myCars<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Saab"</span><span class="token punctuation">;</span>myCars<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Volvo"</span><span class="token punctuation">;</span>myCars<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"BMW"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2.简洁方式-直接实例化</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> myCars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">"Saab"</span><span class="token punctuation">,</span><span class="token string">"Volvo"</span><span class="token punctuation">,</span><span class="token string">"BMW"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>3.字面-隐式创建</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> myCars <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Saab"</span><span class="token punctuation">,</span><span class="token string">"Volvo"</span><span class="token punctuation">,</span><span class="token string">"BMW"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="二、清空数组元素"><a href="#二、清空数组元素" class="headerlink" title="二、清空数组元素"></a><strong>二、清空数组元素</strong></h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> ary <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span> ary<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>ary<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//清空数组 </span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ary<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 []，空数组，即被清空了</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="三、删除数组元素"><a href="#三、删除数组元素" class="headerlink" title="三、删除数组元素"></a><strong>三、删除数组元素</strong></h2><p><strong>1.length属性</strong></p><p>JavaScript中Array的length属性非常有特点一一它不是只读的。因此，可以通过设置这个属性来达到从数组的末尾移除项或添加新项的目的。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"grey"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个包含3个字符串的数组</span>colors<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2.delete方法</strong></p><p>JavaScript提供了一个delete关键字用来删除（清除）数组元素。</p><p>要注意的是，使用delete删除元素之后数组长度不变，只是被删除元素被置为undefined了。</p><p>lang:default decode:true</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"grey"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">delete</span> colors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [undefined, "blue", "grey", "green"]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>3.pop()栈方法</strong></p><p>JavaScript中的Array对象提供了一个pop()栈方法用于弹出并返回数组中的最后一项，某种程度上可以当做删除用。</p><p>栈数据结构的访问规则是FILO（First In Last Out，先进后出），栈操作在栈顶添加项，从栈顶移除项，使用pop()方法，它能移除数组中的最后一项并返回该项，并且数组的长度减1。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"grey"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> color <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "grey"</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以看出，在调用pop()方法时，数组返回最后一项，即”grey”，数组的元素也仅剩两项。</p><p><strong>4.shift()队列方法</strong></p><p>JavaScript中的Array对象提供了一个shift()队列方法用于弹出并返回数组中的第一项，某种程度上也可以当做删除用。</p><p>队列数据结构的访问规则是FIFO（First In First Out，先进先出），队列在列表的末端添加项，从列表的前端移除项，使用shift()方法，它能够移除数组中的第一个项并返回该项，并且数组的长度减1。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"grey"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> color <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "red"</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以看出，在调用shift()方法时，数组返回第一项，即”red”，数组的元素也仅剩两项。</p><p><strong>5.splice()操作方法</strong> </p><p>在JavaScript的Array对象中提供了一个splice()方法用于对数组进行特定的操作。splice()恐怕要算最强大的数组方法了，他的用法有很多种，在此只介绍删除数组元素的方法。在删除数组元素的时候，它可以删除任意数量的项，只需要指定2个参数：要删除的第一项的位置和要删除的项数。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"grey"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> color <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// “red”</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [“blue”, “grey”]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以看出，在调用了splice(0, 1)方法时，数组从第一项开始，删除了一项。</p><p><strong>6.迭代方法</strong></p><p>所谓的迭代方法就是用循环迭代数组元素，发现符合要删除的项则删除。用的最多的地方，可能是当数组中的元素为对象的时候，可以根据对象的某个属性（例如ID）来删除数组元素。</p><p>第一种用最常见的ForEach循环来对比元素找到之后将其删除。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"grey"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>colors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>item <span class="token operator">===</span> “red”<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以看到这里还要配合splice()方法去实现删除，循环只是为了找到特定的元素。另外一种思路是循环将不需要删除的元素推入到新的数组中，也能达到假性删除特定元素的目的。</p><p>第二种我们用循环中的filter方法。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"grey"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>colors <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> item <span class="token operator">!=</span> “red”<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [“blue”, “grey”]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>代码很简单，找出元素不是red的项数返回给colors（其实是得到了一个新的数组，并不是在原数组上进行删除操作），一定程度上也算是达到了删除特定元素的目的。</p><p><strong>7.prototype原型方法</strong></p><p>可以通过在Array的原型上添加方法来达到删除的目的。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dx</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>　　<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>dx<span class="token punctuation">)</span> <span class="token operator">||</span> dx <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>　　　　<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>　　<span class="token punctuation">&#125;</span>　　<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>　　　　<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>dx<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>　　　　　　<span class="token keyword">this</span><span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>　　　　<span class="token punctuation">&#125;</span>　　<span class="token punctuation">&#125;</span>　　<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span>“red”<span class="token punctuation">,</span> “blue”<span class="token punctuation">,</span> “grey”<span class="token punctuation">]</span><span class="token punctuation">;</span>colors<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [“red”, “grey”]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这种方法其实就是自己实现一个删除的逻辑，然后把删除方法添加给了Array的原型对象，则在此环境中的所有Array对象都可以使用该方法。尽管可以这么做，但是不推荐在产品化的程序中修改原生对象的原型。道理很简单，如果只是某个实现中缺少某个方法，就在原生对象的原型中添加这个方法，那么当在另一个支持该方法的实现中运行代码时，就可能导致命名冲突。而且这样做可能会意外地导致原生方法被重写。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js如何往数组Array中添加删除元素</title>
      <link href="/post/5748c66c.html"/>
      <url>/post/5748c66c.html</url>
      
        <content type="html"><![CDATA[<p>数组常用方法：</p><p>1.pop<br>删除原数组最后一项，并返回删除元素的值；如果数组为空则返回undefined</p><p>2.push<br>将参数添加到原数组末尾，并返回数组的长度</p><p>3.concat<br>返回一个新数组，是将参数添加到原数组中构成的</p><span id="more"></span><p>4.splice(start,deleteCount,val1,val2,…)<br>从start位置开始删除deleteCount项，并从该位置起插入val1,val2,…</p><p>5.reverse<br>将数组反序</p><p>6.sort(orderfunction)<br>按指定的参数对数组进行排序</p><p>7.slice(start,end)<br>返回从原数组中指定开始下标到结束下标之间的项组成的新数组</p><p>案例：</p><p>1.数组的创建</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">var arrayObj &#x3D; new Array();　&#x2F;&#x2F;创建一个数组var arrayObj &#x3D; new Array([size]);　&#x2F;&#x2F;创建一个数组并指定长度，注意不是上限，是长度var arrayObj &#x3D; new Array([element0[, element1[, ...[, elementN]]]]);　创建一个数组并赋值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>要说明的是，虽然第二种方法创建数组指定了长度，但实际上所有情况下数组都是变长的，也就是说即使指定了长度为5，仍然可以将元素存储在规定长度以外的，注意：这时长度会随之改变。</p><p>2.数组的元素的访问</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">var testGetArrValue&#x3D;arrayObj[1]; &#x2F;&#x2F;获取数组的元素值arrayObj[1]&#x3D; &quot;这是新值&quot;; &#x2F;&#x2F;给数组元素赋予新的值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>3.数组元素的添加</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">arrayObj. push([item1 [item2 [. . . [itemN ]]]]);&#x2F;&#x2F; 将一个或多个新元素添加到数组结尾，并返回数组新长度arrayObj.unshift([item1 [item2 [. . . [itemN ]]]]);&#x2F;&#x2F; 将一个或多个新元素添加到数组开始，数组中的元素自动后移，返回数组新长度arrayObj.splice(insertPos,0,[item1[, item2[, . . . [,itemN]]]]);&#x2F;&#x2F;将一个或多个新元素插入到数组的指定位置，插入位置的元素自动后移，返回&quot;&quot;。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>4.数组元素的删除</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">arrayObj.pop(); &#x2F;&#x2F;移除最后一个元素并返回该元素值arrayObj.shift(); &#x2F;&#x2F;移除最前一个元素并返回该元素值，数组中元素自动前移arrayObj.splice(deletePos,deleteCount); &#x2F;&#x2F;删除从指定位置deletePos开始的指定数量deleteCount的元素，数组形式返回所移除的元素<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>5.数组的截取和合并</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">arrayObj.slice(start, [end]); &#x2F;&#x2F;以数组的形式返回数组的一部分，注意不包括 end 对应的元素，如果省略 end 将复制 start 之后的所有元素arrayObj.concat([item1[, item2[, . . . [,itemN]]]]); &#x2F;&#x2F;将多个数组（也可以是字符串，或者是数组和字符串的混合）连接为一个数组，返回连接好的新的数组<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>6.数组的拷贝</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">arrayObj.slice(0); &#x2F;&#x2F;返回数组的拷贝数组，注意是一个新的数组，不是指向arrayObj.concat(); &#x2F;&#x2F;返回数组的拷贝数组，注意是一个新的数组，不是指向<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>7.数组元素的排序</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">arrayObj.reverse(); &#x2F;&#x2F;反转元素（最前的排到最后、最后的排到最前），返回数组地址arrayObj.sort(); &#x2F;&#x2F;对数组元素排序，返回数组地址<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>8.数组元素的字符串化</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">arrayObj.join(separator); &#x2F;&#x2F;返回字符串，这个字符串将数组的每一个元素值连接在一起，中间用 separator 隔开。toLocaleString 、toString 、valueOf：可以看作是join的特殊用法，不常用<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac连接mysql出现Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES)</title>
      <link href="/post/cc41aa37.html"/>
      <url>/post/cc41aa37.html</url>
      
        <content type="html"><![CDATA[<p>处理方法：<br><strong>1.关闭mysql的服务，点击最左上的苹果图标在系统偏好设置中，找到mysql，点击，stop</strong></p><p><strong>2.进入终端</strong></p><p>进入mysql目录</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">cd</span> /usr/local/mysql/bin/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>获取管理员权限</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">su</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>禁止mysql验证功能，mysql会自动重启，偏好设置中的mysql状态会变成running</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">./mysqld_safe --skip-grant-tables <span class="token operator">&amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>3.新建一个终端窗口(cmd+T),</strong><br>输入命令：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> /usr/local/mysql/bin/mysql -u root -p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后输入自己电脑密码和mysql密码。</p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL允许root远程登录</title>
      <link href="/post/d490159b.html"/>
      <url>/post/d490159b.html</url>
      
        <content type="html"><![CDATA[<h4 id="1-本地登陆数据库"><a href="#1-本地登陆数据库" class="headerlink" title="1.本地登陆数据库"></a>1.本地登陆数据库</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mico@MacBook-Pro ~ % mysql -u root -pEnter password:Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.Your MySQL connection <span class="token function">id</span> is <span class="token number">3845</span>Server version: <span class="token number">5.7</span>.31 MySQL Community Server <span class="token punctuation">(</span>GPL<span class="token punctuation">)</span>Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2020</span>, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'<span class="token entity" title="\c">\c</span>'</span> to <span class="token function">clear</span> the current input statement.mysql<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><h4 id="2-切换mysql数据库"><a href="#2-切换mysql数据库" class="headerlink" title="2.切换mysql数据库"></a>2.切换mysql数据库</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysql<span class="token operator">></span> use mysqlReading table information <span class="token keyword">for</span> completion of table and <span class="token function">column</span> namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-执行查询，查看数据库当前有访问权限的信息"><a href="#3-执行查询，查看数据库当前有访问权限的信息" class="headerlink" title="3.执行查询，查看数据库当前有访问权限的信息"></a>3.执行查询，查看数据库当前有访问权限的信息</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysql<span class="token operator">></span> SELECT user, <span class="token function">host</span> FROM user<span class="token punctuation">;</span>+---------------+-----------+<span class="token operator">|</span> user          <span class="token operator">|</span> <span class="token function">host</span>      <span class="token operator">|</span>+---------------+-----------+<span class="token operator">|</span> mysql.session <span class="token operator">|</span> localhost <span class="token operator">|</span><span class="token operator">|</span> mysql.sys     <span class="token operator">|</span> localhost <span class="token operator">|</span><span class="token operator">|</span> root          <span class="token operator">|</span> localhost <span class="token operator">|</span>+---------------+-----------+<span class="token number">3</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>结果显示root用户只能localhost能访问</p><h4 id="4-设置访问权限"><a href="#4-设置访问权限" class="headerlink" title="4.设置访问权限"></a>4.设置访问权限</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysql<span class="token operator">></span> GRANT ALL PRIVILEGES ON *.* TO <span class="token string">'root'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'root'</span> WITH GRANT OPTION<span class="token punctuation">;</span>Query OK, <span class="token number">0</span> rows affected, <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5-刷新访问权限表"><a href="#5-刷新访问权限表" class="headerlink" title="5.刷新访问权限表"></a>5.刷新访问权限表</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysql<span class="token operator">></span> FLUSH PRIVILEGES<span class="token punctuation">;</span>Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6-重新查看用户表"><a href="#6-重新查看用户表" class="headerlink" title="6.重新查看用户表"></a>6.重新查看用户表</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysql<span class="token operator">></span> SELECT user, <span class="token function">host</span> FROM user<span class="token punctuation">;</span>+---------------+-----------+<span class="token operator">|</span> user          <span class="token operator">|</span> <span class="token function">host</span>      <span class="token operator">|</span>+---------------+-----------+<span class="token operator">|</span> root          <span class="token operator">|</span> %         <span class="token operator">|</span><span class="token operator">|</span> mysql.session <span class="token operator">|</span> localhost <span class="token operator">|</span><span class="token operator">|</span> mysql.sys     <span class="token operator">|</span> localhost <span class="token operator">|</span><span class="token operator">|</span> root          <span class="token operator">|</span> localhost <span class="token operator">|</span>+---------------+-----------+<span class="token number">4</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>移除JSON对象中的某个属性</title>
      <link href="/post/f475a90b.html"/>
      <url>/post/f475a90b.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-为JSON对象添加一个属性"><a href="#1-为JSON对象添加一个属性" class="headerlink" title="1.为JSON对象添加一个属性"></a>1.为JSON对象添加一个属性</h2><p>因为JSON完全是动态的，所以给一个JSON对象添加一个属性是很简单的，如：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">></span> <span class="token keyword">var</span> json <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">undefined</span><span class="token operator">></span> json<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'Tom'</span><span class="token string">'Tom'</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Tom'</span> <span class="token punctuation">&#125;</span><span class="token keyword">undefined</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><p>这样就为json对象添加了一个名为name的属性，其值为字符串’Tom’</p><h2 id="2-移出JSON对象的一个属性"><a href="#2-移出JSON对象的一个属性" class="headerlink" title="2.移出JSON对象的一个属性"></a>2.移出JSON对象的一个属性</h2><p>接送对象：var user =  {“phone”: {“key1”: “value”, “key2”: “value”}}<br>如果要移除phone属性，则使用delete user.phone;<br>如果要移除phone对象的key1属性，则使用delete  user.phone.key1<br>移出user对象key1属性：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">></span> <span class="token keyword">var</span> user <span class="token operator">=</span>  <span class="token punctuation">&#123;</span><span class="token string">"phone"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token string">"key1"</span><span class="token operator">:</span> <span class="token string">"value"</span><span class="token punctuation">,</span> <span class="token string">"key2"</span><span class="token operator">:</span> <span class="token string">"value"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">undefined</span><span class="token operator">></span> <span class="token keyword">delete</span> user<span class="token punctuation">.</span>phone<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span><span class="token boolean">true</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> phone<span class="token operator">:</span> <span class="token punctuation">&#123;</span> key2<span class="token operator">:</span> <span class="token string">'value'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token keyword">undefined</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>需要注意的是如果要通过变量来动态指定移除某个属性，则不能通过.(点)进行操作，如：<br>var type=’key1’;<br>delete  user.phone.type;这样是错误的，因为它会把type作为phone的一个属性，当然这时type属性是不存在的</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">></span> <span class="token keyword">var</span> type<span class="token operator">=</span><span class="token string">'key2'</span><span class="token punctuation">;</span><span class="token keyword">undefined</span><span class="token operator">></span> <span class="token keyword">delete</span> user<span class="token punctuation">.</span>phone<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token boolean">true</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> phone<span class="token operator">:</span> <span class="token punctuation">&#123;</span> key2<span class="token operator">:</span> <span class="token string">'value'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token keyword">undefined</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装并配置PHP</title>
      <link href="/post/b08df4b3.html"/>
      <url>/post/b08df4b3.html</url>
      
        <content type="html"><![CDATA[<p>一、添加EPEL和REMI存储库</p><p>运行以下命令以添加所需的存储库：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum -y <span class="token function">install</span> https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm<span class="token function">sudo</span> yum -y <span class="token function">install</span> https://rpms.remirepo.net/enterprise/remi-release-7.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><span id="more"></span><p>二、在CentOS 7上安装PHP 7.4版本</p><p>我们现在可以启用PHP 7.4 Remi存储库并在CentOS 7上安装PHP 7.4：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum -y <span class="token function">install</span> yum-utils<span class="token function">sudo</span> yum-config-manager --enable remi-php74<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在CentOS 7上安装PHP 7.4：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum update<span class="token function">sudo</span> yum <span class="token function">install</span> php php-cli<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>使用下一个命令安装其他软件包：</p><p>sudo yum install php-xxx</p><p>例如运行以下命令：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum <span class="token function">install</span> php  php-cli php-fpm php-mysqlnd php-zip php-devel php-gd php-mcrypt php-mbstring php-curl php-xml php-pear php-bcmath php-json<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>当前的PHP版本应为7.4版，如下所示：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">php -vPHP <span class="token number">7.4</span>.0RC1 <span class="token punctuation">(</span>cli<span class="token punctuation">)</span> <span class="token punctuation">(</span>built: Sep  <span class="token number">3</span> <span class="token number">2019</span> 07:45:03<span class="token punctuation">)</span> <span class="token punctuation">(</span> NTS <span class="token punctuation">)</span>Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> The PHP GroupZend Engine v3.4.0-dev, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> Zend Technologies<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果要查看启用的模块，请运行：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">php --modules<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>至此，你已经在CentOS 7上成功安装了PHP 7.4，欢迎使用此版本进行PHP开发/测试。</p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js得到今天日期、本周、本月、本季度、本年起始和结束日期</title>
      <link href="/post/45548175.html"/>
      <url>/post/45548175.html</url>
      
        <content type="html"><![CDATA[<p>1.js得到今天日期、本周、本月、本年起始和结束日期，得到今天、昨天、明天日期。</p><pre class="line-numbers language-javas" data-language="javas"><code class="language-javas">function getDate(dates) &#123;    var dd &#x3D; new Date();    var n &#x3D; dates || 0;    dd.setDate(dd.getDate() + n);    var y &#x3D; dd.getFullYear();    var m &#x3D; dd.getMonth() + 1;    var d &#x3D; dd.getDate();    m &#x3D; m &lt; 10 ? &quot;0&quot; + m: m;    d &#x3D; d &lt; 10 ? &quot;0&quot; + d: d;    var day &#x3D; y + &quot;-&quot; + m + &quot;-&quot; + d;    return day;&#125;; getDate(dates)  &#x2F;&#x2F;dates为数字类型，0代表今日,-1代表昨日，1代表明日，返回yyyy-mm-dd格式字符串，dates不传默认代表今日。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><p>2.得到本周、上周、下周的起始、结束日期</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">function getMonday(type, dates) &#123;    var now &#x3D; new Date();    var nowTime &#x3D; now.getTime();    var day &#x3D; now.getDay();    var longTime &#x3D; 24 * 60 * 60 * 1000;    var n &#x3D; longTime * 7 * (dates || 0);    if (type &#x3D;&#x3D; &quot;s&quot;) &#123;        var dd &#x3D; nowTime - (day - 1) * longTime + n;    &#125;;    if (type &#x3D;&#x3D; &quot;e&quot;) &#123;        var dd &#x3D; nowTime + (7 - day) * longTime + n;    &#125;;    dd &#x3D; new Date(dd);    var y &#x3D; dd.getFullYear();    var m &#x3D; dd.getMonth() + 1;    var d &#x3D; dd.getDate();    m &#x3D; m &lt; 10 ? &quot;0&quot; + m: m;    d &#x3D; d &lt; 10 ? &quot;0&quot; + d: d;    var day &#x3D; y + &quot;-&quot; + m + &quot;-&quot; + d;    return day;&#125;; getMonday(type,dates)  &#x2F;&#x2F;type为字符串类型，有两种选择，&quot;s&quot;代表开始,&quot;e&quot;代表结束，dates为数字类型，不传或0代表本周，-1代表上周，1代表下周getMonday(&quot;s&quot;,1)  &#x2F;&#x2F;得到下周一的yyyy-mm-dd格式日期getMonday(&quot;e&quot;,1)  &#x2F;&#x2F;得到下周日的yyyy-mm-dd格式日期<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.得到本月、上月、下月的起始、结束日期</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">function getMonth(type, months) &#123;    var d &#x3D; new Date();    var year &#x3D; d.getFullYear();    var month &#x3D; d.getMonth() + 1;    if (Math.abs(months) &gt; 12) &#123;        months &#x3D; months % 12;    &#125;;    if (months !&#x3D; 0) &#123;        if (month + months &gt; 12) &#123;            year++;            month &#x3D; (month + months) % 12;        &#125; else if (month + months &lt; 1) &#123;            year--;            month &#x3D; 12 + month + months;        &#125; else &#123;            month &#x3D; month + months;        &#125;;    &#125;;    month &#x3D; month &lt; 10 ? &quot;0&quot; + month: month;    var date &#x3D; d.getDate();    var firstday &#x3D; year + &quot;-&quot; + month + &quot;-&quot; + &quot;01&quot;;    var lastday &#x3D; &quot;&quot;;    if (month &#x3D;&#x3D; &quot;01&quot; || month &#x3D;&#x3D; &quot;03&quot; || month &#x3D;&#x3D; &quot;05&quot; || month &#x3D;&#x3D; &quot;07&quot; || month &#x3D;&#x3D; &quot;08&quot; || month &#x3D;&#x3D; &quot;10&quot; || month &#x3D;&#x3D; &quot;12&quot;) &#123;        lastday &#x3D; year + &quot;-&quot; + month + &quot;-&quot; + 31;    &#125; else if (month &#x3D;&#x3D; &quot;02&quot;) &#123;        if ((year % 4 &#x3D;&#x3D; 0 &amp;&amp; year % 100 !&#x3D; 0) || (year % 100 &#x3D;&#x3D; 0 &amp;&amp; year % 400 &#x3D;&#x3D; 0)) &#123;            lastday &#x3D; year + &quot;-&quot; + month + &quot;-&quot; + 29;        &#125; else &#123;            lastday &#x3D; year + &quot;-&quot; + month + &quot;-&quot; + 28;        &#125;;    &#125; else &#123;        lastday &#x3D; year + &quot;-&quot; + month + &quot;-&quot; + 30;    &#125;;    var day &#x3D; &quot;&quot;;    if (type &#x3D;&#x3D; &quot;s&quot;) &#123;        day &#x3D; firstday;    &#125; else &#123;        day &#x3D; lastday;    &#125;;    return day;&#125;; getMonth(type,months)  &#x2F;&#x2F;type为字符串类型，有两种选择，&quot;s&quot;代表开始,&quot;e&quot;代表结束，months为数字类型，不传或0代表本月，-1代表上月，1代表下月getMonth(&quot;s&quot;,1)  &#x2F;&#x2F;得到下月第一天的yyyy-mm-dd格式日期getMonth(&quot;e&quot;,1)  &#x2F;&#x2F;得到下月最后一天的yyyy-mm-dd格式日期<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>4.得到今年、去年、明年的开始、结束日期</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">function getYear(type, dates) &#123;    var dd &#x3D; new Date();    var n &#x3D; dates || 0;    var year &#x3D; dd.getFullYear() + Number(n);    if (type &#x3D;&#x3D; &quot;s&quot;) &#123;        var day &#x3D; year + &quot;-01-01&quot;;    &#125;;    if (type &#x3D;&#x3D; &quot;e&quot;) &#123;        var day &#x3D; year + &quot;-12-31&quot;;    &#125;;    if (!type) &#123;        var day &#x3D; year + &quot;-01-01&#x2F;&quot; + year + &quot;-12-31&quot;;    &#125;;    return day;&#125;; getYear(type,dates)  &#x2F;&#x2F;type为字符串类型，有两种选择，&quot;s&quot;代表开始,&quot;e&quot;代表结束，dates为数字类型，不传或0代表今年，-1代表去年，1代表明年getYear(&quot;s&quot;,1)  &#x2F;&#x2F;得到明年第一天的yyyy-mm-dd格式日期getYear(&quot;e&quot;,1)  &#x2F;&#x2F;得到明年最后一天的yyyy-mm-dd格式日期<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5.得到本季度的开始、结束日期</p><pre class="line-numbers language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">function getQuarterMonth(type)&#123;  var now &#x3D; new Date(); var nowMonth &#x3D; now.getMonth();var year &#x3D; now.getFullYear();    var quarterStartMonth &#x3D; 1;         if(nowMonth&lt;3)&#123;            quarterStartMonth &#x3D; 1;         &#125;         if(2&lt;nowMonth &amp;&amp; nowMonth&lt;6)&#123;            quarterStartMonth &#x3D; 4;         &#125;         if(5&lt;nowMonth &amp;&amp; nowMonth&lt;9)&#123;            quarterStartMonth &#x3D; 7;         &#125;         if(nowMonth&gt;8)&#123;            quarterStartMonth &#x3D; 10;         &#125;     if (type &#x3D;&#x3D; &quot;s&quot;) &#123;        var day &#x3D; year+&quot;-&quot;+quarterStartMonth+&quot;-01&quot;;     &#125;;&#x2F;&#x2F;1-3 4-6 7-9 10-12    if (type &#x3D;&#x3D; &quot;e&quot;) &#123;    if(quarterStartMonth&#x3D;&#x3D;1)&#123;    var day &#x3D; year+&quot;-&quot;+(quarterStartMonth+2)+&quot;-31&quot;;    &#125;    if(quarterStartMonth&#x3D;&#x3D;10)&#123;    var day &#x3D; year+&quot;-&quot;+(quarterStartMonth+2)+&quot;-31&quot;;    &#125;    if(quarterStartMonth&#x3D;&#x3D;4)&#123;    var day &#x3D; year+&quot;-&quot;+(quarterStartMonth+2)+&quot;-30&quot;;    &#125;    if(quarterStartMonth&#x3D;&#x3D;7)&#123;    var day &#x3D; year+&quot;-&quot;+(quarterStartMonth+2)+&quot;-30&quot;;    &#125;    &#125;;    return day;     &#125; getQuarterMonth(&quot;s&quot;,1)  &#x2F;&#x2F;得到本季度第一天的yyyy-mm-dd格式日期 getQuarterMonth(&quot;e&quot;,1)  &#x2F;&#x2F;得到本季度最后一天的yyyy-mm-dd格式日期<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7安装docker</title>
      <link href="/post/a1fb3e72.html"/>
      <url>/post/a1fb3e72.html</url>
      
        <content type="html"><![CDATA[<p>Docker从1.13版本之后采用时间线的方式作为版本号，分为社区版CE和企业版EE。</p><p>社区版是免费提供给个人开发者和小型团体使用的，企业版会提供额外的收费服务，比如经过官方测试认证过的基础设施、容器、插件等。</p><p>社区版按照stable和edge两种方式发布，每个季度更新stable版本，如17.06，17.09；每个月份更新edge版本，如17.09，17.10。</p><span id="more"></span><p> 一、安装docker</p><p>1、Docker 要求 CentOS 系统的内核版本高于 3.10 ，查看本页面的前提条件来验证你的CentOS 版本是否支持 Docker 。</p><p>通过 uname -r 命令查看你当前的内核版本</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">uname</span> -r<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2、使用 root 权限登录 Centos。确保 yum 包更新到最新。</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum update<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>3、卸载旧版本(如果安装过旧版本的话)</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum remove docker  docker-common docker-selinux docker-engine<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>4、安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>5、设置yum源</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>6、可以查看所有仓库中所有docker版本，并选择特定版本安装</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yum list docker-ce --showduplicates <span class="token operator">|</span> <span class="token function">sort</span> -r<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>7、安装docker</p><p>sudo yum install docker-ce  #由于repo中默认只开启stable仓库，故这里安装的是最新稳定版17.12.0<br>sudo yum install <FQPN>  # 例如：sudo yum install docker-ce-17.12.0.ce</FQPN></p><p>8、启动并加入开机启动</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> systemctl start docker<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>9、验证安装是否成功(有client和service两部分表示docker安装启动都成功了)</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>二、问题</p><p>1、因为之前已经安装过旧版本的docker，在安装的时候报错如下：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Transaction check error:  <span class="token function">file</span> /usr/bin/docker from <span class="token function">install</span> of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with <span class="token function">file</span> from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64  <span class="token function">file</span> /usr/bin/docker-containerd from <span class="token function">install</span> of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with <span class="token function">file</span> from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64  <span class="token function">file</span> /usr/bin/docker-containerd-shim from <span class="token function">install</span> of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with <span class="token function">file</span> from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64  <span class="token function">file</span> /usr/bin/dockerd from <span class="token function">install</span> of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with <span class="token function">file</span> from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2、卸载旧版本的包</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum erase docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>3、再次安装docker</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
